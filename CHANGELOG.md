# 变更日志 (Changelog)

## v1.0.3 (2026-01-31)

### 🎯 重大改进

**Phase 4完全重新设计** - 从用户真实需求出发!

**核心变化**:
- ✅ **优先支持本地文件更新** - CLI用户的核心需求
- ✅ **智能场景检测** - 自动识别文件路径/Notion链接/纯文本
- ✅ **平台差异处理** - Claude Code可更新本地文件,Claude.ai不行

### 💡 为什么要重新设计?

**v1.0.2的问题**:
- v1.0.2的Phase 4只支持Notion页面更新
- 但CLI用户主要操作本地markdown文件,不是Notion
- 不符合Claude Code用户的真实使用场景

**v1.0.3的解决方案**:
- 优先支持本地文件(README.md、文档、笔记)
- 智能检测用户提供的内容类型
- 根据平台能力提供合适的处理方式

### 📋 详细变更

**新增功能**:

1. **本地文件更新支持** (Claude Code)
   - 支持更新本地markdown、文本等文件
   - 智能识别文件路径(绝对路径、相对路径、波浪号)
   - 自动检查文件是否存在和写入权限
   - 更新后提供明确的确认信息

2. **智能场景检测**
   - 自动检测用户提供了文件路径/Notion链接/纯文本
   - 根据检测结果提供最合适的处理选项
   - 优先级: 本地文件 > Notion页面 > 生成新文档

3. **平台差异处理**
   - Claude Code: 支持更新本地文件 + Notion + 生成新文档
   - Claude.ai: 支持Notion + 生成新文档,不支持本地文件
   - 在Claude.ai中提供本地路径时,智能提示并生成新文档

**支持的文件格式**:
- `.md` - Markdown文件
- `.txt` - 纯文本文件
- `.rst` - reStructuredText文件
- 任何UTF-8文本文件

**支持的路径格式**:
- 绝对路径: `/Users/albert/Documents/README.md`
- 波浪号路径: `~/Documents/README.md`
- Windows路径: `C:\Users\Albert\Documents\README.md`
- 相对路径: `./README.md`, `../docs/intro.md`

### 💡 使用变化

**v1.0.2的使用方式**:
```
用户: 改写 ~/project/README.md
Claude: [只能生成新文档,需要手动复制粘贴]
```

**v1.0.3的使用方式**:
```
用户: 改写 ~/project/README.md
Claude: [检测到本地文件]
        1️⃣ 更新本地文件 ← 推荐
        2️⃣ 生成新文档
        
用户: "1"
Claude: ✅ 文件已更新! ~/project/README.md
```

### 🔄 从v1.0.2升级

v1.0.2和v1.0.3完全兼容,直接替换即可:

```bash
# 解压新版本到Claude skills目录
unzip alskai-deai-writer-v1.0.3.skill -d ~/.claude/skills/

# 重新加载
/reload-skills
```

### 📊 兼容性

- ✅ 完全向后兼容v1.0.2和v1.0.0
- ✅ 支持所有v1.0.2的功能
- ✅ 新增功能不影响现有工作流
- ✅ Phase 0-3逻辑保持不变

### 🆚 版本对比

| 功能 | v1.0.2 | v1.0.3 |
|------|--------|--------|
| 更新本地文件 | ❌ | ✅ |
| 更新Notion页面 | ✅ | ✅ |
| 生成新文档 | ✅ | ✅ |
| 智能场景检测 | ❌ | ✅ |
| 平台差异处理 | ❌ | ✅ |
| CLI用户体验 | ⚠️ 一般 | ✅ 优秀 |

---

## v1.0.2 (2026-01-30)

### 🎯 新增功能

**Phase 4: 文档处理选择**:
- ✅ 改写完成后询问用户处理方式
- ✅ 支持直接更新Notion页面
- ✅ 支持生成新文档输出
- ✅ 智能判断是否可以更新原文档

**核心价值**:
- 更灵活的工作流程
- 无缝集成Notion工作区
- 提升内容更新效率

### 📋 详细变更

**新增**:
- Phase 4文档处理选择流程
- Notion页面直接更新功能
- 新文档生成输出格式
- 更新确认和错误提示

**优化**:
- 完善了工作流程说明
- 增加了使用场景示例
- 优化了典型对话流程

### 💡 使用变化

**v1.0.0的工作流程**:
```
Phase 0 → Phase 1 → Phase 2 → Phase 3
(事实核查 → 诊断 → 风格选择 → 重构)
```

**v1.0.2的工作流程**:
```
Phase 0 → Phase 1 → Phase 2 → Phase 3 → Phase 4
(事实核查 → 诊断 → 风格选择 → 重构 → 文档处理)
```

**新的交互示例**:
```
用户: 改写我的Notion页面
Claude: [完成改写后]
        📄 请选择:
        1️⃣ 直接更新原文档
        2️⃣ 生成新文档
        
用户: "直接更新"
Claude: ✅ 已更新Notion页面!
```

### 🔄 从v1.0.0升级

v1.0.0和v1.0.2完全兼容,直接替换即可:

```bash
# 覆盖安装
unzip alskai-deai-writer-v1.0.2.skill -d ~/.claude/skills/
/reload-skills
```

### 📊 兼容性

- ✅ 完全向后兼容v1.0.0
- ✅ 支持所有v1.0.0的功能
- ✅ 新增功能可选使用
- ✅ 不影响现有工作流

---

## v1.0.0 (2026-01-29)

### 🎉 重大更新

**新增功能**:
- ✅ **4种风格系统**: 专业商务风、技术科普风、亲和对话风、学术研究风
- ✅ **风格选择机制**: 在Phase 2之后可选择改写风格
- ✅ **默认风格**: 未指定时使用亲和对话风
- ✅ **通用化**: 去除特定个人风格,改为通用风格库

**保留核心功能**:
- ✅ Phase 0事实核查(自动触发)
- ✅ 8维度AI味诊断
- ✅ 短句为主,长句为辅
- ✅ 严格限制列表使用
- ✅ 质量红线和自检机制

**适用场景扩展**:
- ✅ 产品介绍和商业报告
- ✅ 技术文档和开发教程  
- ✅ 个人博客和公众号文章
- ✅ 学术论文和研究报告

### 📋 详细变更

**新增**:
- 专业商务风格特征库(用数据说话,客观有力)
- 技术科普风格特征库(深入浅出,技术类比)
- 亲和对话风格特征库(轻松自然,有温度)
- 学术研究风格特征库(严谨客观,注重论证)
- Phase 2风格选择提示
- 每种风格的示例对比

**修改**:
- 将"ALSKai风格特征"改为"通用风格体系"
- 优化Phase 3的风格注入逻辑
- 更新使用流程示例
- 完善风格选择说明

**删除**:
- 移除特定的个人化表达(如标志性开头)
- 移除固定的风格特征

### 💡 使用变化

**v0.0.1的使用方式**:
```
用户: 帮我改写这段文章,去掉AI味
Claude: [自动使用ALSKai风格改写]
```

**v1.0.0的使用方式**:
```
用户: 帮我改写这段文章,去掉AI味
Claude: [诊断后展示4种风格选项]
用户: "用专业商务风" 或 "技术科普风" 或 "对话风"
Claude: [使用选定风格改写]
```

### 📊 兼容性

- ✅ 完全向后兼容Claude Code
- ✅ 完全向后兼容Claude.ai
- ✅ 支持所有v0.0.1的触发关键词
- ✅ 默认风格确保平滑过渡

---

## v0.0.1 (2026-01-27)

### 🚀 首次发布

**核心功能**:
- ✅ Phase 0: 事实核查(自动触发)
- ✅ Phase 1: 8维度AI味诊断 + 去冗余
- ✅ Phase 2: 锐度诊断
- ✅ Phase 3: ALSKai风格重构

**特点**:
- 专注于单一风格(ALSKai个人风格)
- 适用于公众号文章初稿
- 轻松幽默,观点锐利

**限制**:
- 只支持单一风格
- 个人化特征强

---

## 版本对比

| 功能 | v0.0.1 | v1.0.0 | v1.0.2 | v1.0.3 |
|------|--------|--------|--------|--------|
| 风格数量 | 1种 | 4种 | 4种 | 4种 |
| 风格选择 | ❌ | ✅ | ✅ | ✅ |
| 事实核查 | ✅ | ✅ | ✅ | ✅ |
| AI味诊断 | ✅ | ✅ | ✅ | ✅ |
| 更新本地文件 | ❌ | ❌ | ❌ | ✅ |
| 更新Notion | ❌ | ❌ | ✅ | ✅ |
| 智能检测 | ❌ | ❌ | ❌ | ✅ |
| CLI用户体验 | - | - | ⚠️ | ✅ |

---

## 下一版本规划 (v1.1.0)

**计划功能**:
- 🔮 风格混合(如"70%专业+30%对话")
- 🔮 支持飞书文档直接更新
- 🔮 支持语雀文档直接更新
- 🔮 自定义风格模板
- 🔮 行业专用术语库
- 🔮 批量处理模式

**发布时间**: TBD

---

## 反馈与建议

如果你有任何建议或发现bug,欢迎:
- 在GitHub提Issue
- 或联系作者: ALSKai

感谢使用! 🌿
